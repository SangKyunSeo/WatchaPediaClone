import{u as g,b as u,j as _,_ as p,d as C,o,c as n,a as e,t as r,k as l,F as b,e as f,f as w,w as D,p as y,g as k}from"./index-67670712.js";const B={name:"MovieDetail",props:{movie_num:{type:Number,default:0}},data(){return{movieDetails:{movie_num:0,movie_name:"",movie_open:"",movie_content:"",movie_grade:0,image_url:"",image_oname:""},movieGenreName:"",movieCastList:[{person_item_num:0,person_num:0,item_type:0,item_num:0,person_item_role:"",person_name:"",image_url:"",image_oname:""}],scrabInfo:{scrab_num:0,member_num:0,scrab_item_type:0,scrab_item_num:0,scrab_type:0},wishWatchValue:-1,watchingValue:-1,router:g(),loginState:this.$store.getters.getLoginState,member_num:this.$store.getters.getUserNum}},mounted(){this.getMovieDetail(),this.getMovieGenre(),this.getMovieCast(),this.loginState==!0&&this.getScrabInfo()},computed:{},methods:{getMovieDetail(){u.get("/getMovieInfo",{params:{movie_num:this.$route.params.movie_num}}).then(t=>{this.movieDetails=t.data,this.movieDetails.movie_open=this.movieDetails.movie_open.substring(0,4)})},getMovieGenre(){u.get("/getMovieGenre",{params:{movie_num:this.$route.params.movie_num}}).then(t=>{this.movieGenreName=t.data})},getMovieCast(){u.get("/getMovieCast",{params:{movie_num:this.$route.params.movie_num}}).then(t=>{this.movieCastList=t.data})},getImageUrl(t){const s=window.location.href;return new URL(`../movieimg/${t}.jpg`,s).href},getProfileImageUrl(t){const s=window.location.href;return new URL(`../personimg/${t}.jpg`,s).href},async getScrabInfo(){try{const t=await _.get("/getScrabInfo",{params:{movie_num:this.$route.params.movie_num,member_num:this.member_num,scrab_item_type:1}});console.log("Response: "+t),this.scrabInfo=t.data,this.scrabInfo.scrab_item_type==0?this.watchingValue=1:this.scrabInfo.scrab_item_type==1&&(this.wishWatchValue=1)}catch(t){console.log("Error: "+t)}},async wishWatch(){if(this.$store.getters.getAccessToken=="")alert("로그인이 필요합니다.");else try{const s=await _.get("/setWishWatch",{params:{member_num:this.member_num,scrab_item_type:1,scrab_item_num:this.$route.params.movie_num,scrab_type:1}});console.log("Response: "+s),this.scrabInfo=s.data,this.scrabInfo.scrab_item_type==1&&this.scrabInfo&&(this.wishWatchValue=1,this.watchingValue=-1),this.scrabInfo||(this.wishWatchValue=-1)}catch(s){console.log("Error: "+s)}},writeComment(){this.$store.getters.getAccessToken==""?alert("로그인이 필요합니다."):alert("로그인 되어있으니 코멘트 작성 기능 ㄱㄱ")},async watching(){if(this.$store.getters.getAccessToken=="")alert("로그인이 필요합니다.");else try{const s=await _.get("/setWishWatch",{params:{member_num:this.member_num,scrab_item_type:1,scrab_item_num:this.$route.params.movie_num,scrab_type:0}});console.log("Response: "+s),this.scrabInfo=s.data,this.scrabInfo.scrab_item_type==0&&this.scrabInfo&&(this.wishWatchValue=-1,this.watchingValue=1),this.scrabInfo||(this.watchingValue=-1)}catch(s){console.log("Error: "+s)}}}};const a=t=>(y("data-v-ef1a5ed9"),t=t(),k(),t),I=a(()=>e("h1",null,"영화 상세 화면",-1)),A={class:"movie-detail-header"},V={class:"movie-post"},F={class:"movie-post-summary"},W={key:0},M={key:1},S={key:2},T={class:"movie-summary"},L={class:"movie-info"},U={class:"movie-image"},N={class:"movie-image-child1"},R={class:"movie-image-child2"},x=["src"],E={class:"movie-detail-info"},G={class:"section-review"},$=a(()=>e("div",{class:"movie-review"},[e("div",{class:"review-star"},[e("div",null," 별그림 ")]),e("div",{class:"review-btn"},[e("div",null,"평가하기")])],-1)),j={class:"review-buttons"},P=a(()=>e("div",{class:"wish-btn"},"+",-1)),q=a(()=>e("div",{class:"wish-btn"},"+",-1)),z=a(()=>e("div",{class:"comment-btn"},"연필",-1)),H=a(()=>e("div",{class:"watching-btn"},"눈",-1)),J=a(()=>e("div",{class:"watching-btn"},"눈",-1)),K={class:"section-movie-detail-info"},O={class:"movie-person-comment"},Q={class:"movie-persons"},X={class:"person-title"},Y=a(()=>e("h2",null,"출연/제작",-1)),Z={class:"person-profile-image"},ee=["src"],se={class:"person-name"},te={class:"person-role"},ie=a(()=>e("div",{class:"person-main"},null,-1)),oe=a(()=>e("section",{class:"movie-comments"},[e("div",{class:"comment-title"},[e("h2",null,"코멘트")]),e("div",{class:"comment-main"})],-1));function ne(t,s,h,ae,i,m){const v=C("router-link");return o(),n("main",null,[I,e("div",A,[e("div",V,[e("div",F,[e("div",null,[e("h1",null,r(i.movieDetails.movie_name),1),e("div",null,r(i.movieDetails.movie_name),1),e("div",null,r(i.movieDetails.movie_open)+" • "+r(i.movieGenreName),1),i.movieDetails.movie_grade==0?(o(),n("div",W,"2시간4분 / 전체")):i.movieDetails.movie_grade==18?(o(),n("div",M,"2시간4분 / 청불")):(o(),n("div",S,"2시간4분 / "+r(i.movieDetails.movie_grade)+"세",1))])])]),e("div",T,[e("section",L,[e("div",U,[e("div",N,[e("div",R,[e("img",{src:m.getImageUrl(`${i.movieDetails.image_oname}`)},null,8,x)])])]),e("div",E,[e("section",G,[$,e("div",j,[i.wishWatchValue==-1?(o(),n("button",{key:0,class:"wish-watch",onClick:s[0]||(s[0]=c=>m.wishWatch())},[P,l(" 보고싶어요 ")])):(o(),n("button",{key:1,class:"wish-watch",onClick:s[1]||(s[1]=c=>m.wishWatch()),style:{"border-color":"pink"}},[q,l(" 보고싶어요 ")])),e("button",{class:"write-comment",onClick:s[2]||(s[2]=c=>m.writeComment())},[z,l(" 코멘트 ")]),i.watchingValue==-1?(o(),n("button",{key:2,class:"watching",onClick:s[3]||(s[3]=c=>m.watching())},[H,l(" 보는중 ")])):(o(),n("button",{key:3,class:"watching",onClick:s[4]||(s[4]=c=>m.watching()),style:{"border-color":"pink"}},[J,l(" 보는중 ")]))])]),e("section",K,r(i.movieDetails.movie_content),1)])])])]),e("div",O,[e("section",Q,[e("div",X,[Y,e("ul",null,[(o(!0),n(b,null,f(i.movieCastList,(c,d)=>(o(),n("li",{key:d},[w(v,{to:{name:"PersonDetail",params:{person_num:c.person_num}},class:"movieCast-details"},{default:D(()=>[e("div",Z,[e("img",{src:m.getProfileImageUrl(`${c.image_oname}`)},null,8,ee)]),e("div",null,[e("div",null,[e("div",se,r(c.person_name),1),e("div",te,r(c.person_item_role),1)])])]),_:2},1032,["to"])]))),128))])]),ie]),oe])])}const re=p(B,[["render",ne],["__scopeId","data-v-ef1a5ed9"]]);export{re as default};
